* Introduction
This is an Emacs minor mode for [[https://github.com/hyperfiddle/electric][Electric Clojure]]. It colors client and server sites in source code.

Here's a simple example (code taken from https://electric.hyperfiddle.net/tutorial/dir_tree):
[[file:readme-files/dir-tree-example.png]]
* Installation
To install, copy the file ~nomis-electric-clojure.el~ to a place where it will
be found by your Emacs and add the following to your init file:
#+begin_src elisp
  (require 'nomis-electric-clojure)
#+end_src
* Turning on nomis-electric-clojure-mode
To turn on nomis-electric-clojure-mode, run ~M-x nomis-electric-clojure-mode~.
The same command will turn it off.
* Overview of Features
nomis-electric-clojure-mode does the following:

- Auto-detects whether the code is Electric v2 or Electric v3. It does this by
  looking for ~[hyperfiddle.electric :as e]~ or ~[hyperfiddle.electric3 :as e]~
  at the start of the file. If it can't decide, it assumes v3.

- Applies separate colors to client regions and server regions.

- Does not apply a color to regions that may be either client or server.

nomis-electric-clojure-mode does not look at the call tree, so regions of code
that are not colored may in fact always run on one site.
* Coloring Initial Whitespace
By default, initial whitespace is not colored.

You can toggle that with ~M-x nomis/ec-toggle-highlight-initial-whitespace?~

Here's a simple example (code taken from https://electric.hyperfiddle.net/tutorial/dir_tree):
file:readme-files/dir-tree-example-initial-whitespace.png
* FAQ
** nomis-electric-clojure-mode thinks my code is v2 but actually it's v3, or vice versa
This can happen in a newly-created file or if the if the ~:require~ form
in the namespace declaration is changed.

You can re-run the auto-detection of the version in any of the following ways:

- by running ~M-x nomis/ec-redetect-electric-version~

- by turning nomis-electric-clojure-mode off and then back on (by running
  ~M-x nomis-electric-clojure-mode~ twice)

- by reverting the buffer.
* Contributing
For now, I'm not accepting PRs. Instead you can get in touch with me at
https://clojurians.slack.com/. My user name is /simonkatz/ --- either
tag me or DM me.
